<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CohortIncidence Method Documentation • CohortIncidence</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="CohortIncidence Method Documentation">
<meta property="og:description" content="CohortIncidence">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CohortIncidence</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cohortincidence-method-documentation.html">CohortIncidence Method Documentation</a>
    </li>
    <li>
      <a href="../articles/using-cohortincidence.html">Using CohortIncidence</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/CohortIncidence/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>CohortIncidence Method Documentation</h1>
                        <h4 data-toc-skip class="author">Christopher
Knoll</h4>
            
            <h4 data-toc-skip class="date">2024-10-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortIncidence/blob/HEAD/vignettes/cohortincidence-method-documentation.Rmd" class="external-link"><code>vignettes/cohortincidence-method-documentation.Rmd</code></a></small>
      <div class="hidden name"><code>cohortincidence-method-documentation.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>The incidence calculation method of CohortIncidence supports multiple
cohort episodes per person and multiple outcomes per person, and
accounts for immortal time from outcomes and clean windows. This article
describes the methods of excluding immortal time from time-at-risk, and
the calculations behind the incidence rate and incidence proportion
statistics.</p>
</div>
<div class="section level2">
<h2 id="terminology">Terminology<a class="anchor" aria-label="anchor" href="#terminology"></a>
</h2>
<p>When describing the CohortIncidence method, there are several key
concepts to understand:</p>
<ul>
<li>cohort: a group of people satisfying clinical criteria for a period
of time. This could be patients exposed, or patients diagnosed (among
other types of cohorts)</li>
<li>target cohort: The cohort that represents the population of interest
to calculate incidence for.</li>
<li>time at risk: The period of time relative to a person’s cohort
episode that the person is at risk of an outcome. For example, ‘on
treatment’ is from the exposure cohort’s start to end date, while
‘intent to treat’ is from exposure start to 9999 days after exposure
start (ie: all time after exposure)</li>
<li>outcome: the cohort that represents the cases to look for during
time at risk, plus a clean window specification indicating the time
after an case where another new case can be counted. Since the clean
window prevents new outcomes, the person’s time at risk is excluded
during the period of the clean window.</li>
<li>case: A case is counted when an outcome is found to begin during the
time at risk.</li>
<li>incidence proportion: the number of people with at least 1 case
divided by the number of people who have at least 1 day at risk.
(persons with cases / persons at risk)</li>
<li>incidence rate: the number of cases divided by total time at risk.
(cases / time at risk)</li>
</ul>
<p>Incidence proportion is reported as ‘per 100 people’, and Incidence
rate is reported as ‘per 100 person years’.</p>
</div>
<div class="section level2">
<h2 id="example-calcuating-incidence-from-a-single-patient-timeline">Example: Calcuating incidence from a single patient timeline<a class="anchor" aria-label="anchor" href="#example-calcuating-incidence-from-a-single-patient-timeline"></a>
</h2>
<div class="section level3">
<h3 id="step-1-define-tar-and-clean-windows">Step 1: Define TAR and Clean Windows<a class="anchor" aria-label="anchor" href="#step-1-define-tar-and-clean-windows"></a>
</h3>
<p>The figure below represents a single person in the target cohort with
3 episodes of a treatment, and the time-at-risk specification extending
the first episode into the second. This person also has 6 outcome events
represented by the gold stars, and the clean window extending from each
outcome, causing time at risk to be excluded and certain outcomes to be
ignored.</p>
<p><img src="../reference/figures/example1_s1.png"> Figure 1: The initial
intervals of time-at-risk, outcomes and clean windows.</p>
</div>
<div class="section level3">
<h3 id="step-2-collapse-tar-and-clean-windows">Step 2: Collapse TAR and Clean Windows<a class="anchor" aria-label="anchor" href="#step-2-collapse-tar-and-clean-windows"></a>
</h3>
<p>Overlapping intervals of TAR and clean windows need to be ‘flattened’
and outcomes that occur during clean windows are removed. After this is
done, the person TAR, clean window and outcomes look like the following
figure: <img src="../reference/figures/example1_s2.png"> Figure 2: Merging
TAR and clean windows, and removing outcomes from clean windows.</p>
</div>
<div class="section level3">
<h3 id="step-3-remove-immortal-time">Step 3: Remove Immortal Time<a class="anchor" aria-label="anchor" href="#step-3-remove-immortal-time"></a>
</h3>
<p>With the time at risk and clean windows merged, all time at risk that
overlaps with clean window periods are removed from the person. The
result looks like the following: <img src="../reference/figures/example1_s3.png"> Figure 3: TAR excluded from
patient timeline.</p>
</div>
<div class="section level3">
<h3 id="step-4-calculate-incidence-rate-and-proportion">Step 4: Calculate Incidence Rate and Proportion<a class="anchor" aria-label="anchor" href="#step-4-calculate-incidence-rate-and-proportion"></a>
</h3>
<p>With the TAR cleaned up, the final timeline is used to calculate the
incidence rates and proportions:</p>
<p><img src="../reference/figures/example1_s4.png"> Figure 4: The final
timeline used to calculate incidence.</p>
<p>Incidence Rate = cases / TAR. In this example, there are only 2 cases
during TAR. Incidence Proportion = (distinct people with cases) /
(distinct people). This person contributes one person count and one
person with case count.</p>
</div>
</div>
<div class="section level2">
<h2 id="limiting-follow-up-to-first-outcome">Limiting follow up to first outcome<a class="anchor" aria-label="anchor" href="#limiting-follow-up-to-first-outcome"></a>
</h2>
<p>Some analytic use cases call for only following the patient until the
first outcome. This means, in a CohortIncidence context, that after an
outcome, no further outcomes are allowed and no post-outcome
time-at-risk should be counted. This is handled by setting a ‘9999’
clean window so that all time after an outcome is excluded.</p>
<p><img src="../reference/figures/first-outcome.png"></p>
<p>Note: using this approach will exclude anyone with a prior outcome,
since their time-at-risk will be completely excluded. In order to ignore
prior outcomes but exclude all time after the first outcome after
exposure, a specialized ‘O-with-prior-T’ outcome cohort is required that
will only capture outcomes that occur post-T.</p>
</div>
<div class="section level2">
<h2 id="a-tabular-example">A Tabular Example<a class="anchor" aria-label="anchor" href="#a-tabular-example"></a>
</h2>
<p>The following table represents a data set of calculated time at risk,
cases, and calculated rates/proportions:</p>
<table class="table">
<thead><tr class="header">
<th>person_id</th>
<th>time_at_risk_pe</th>
<th>time_at_risk</th>
<th>cases_pe</th>
<th>cases</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>365</td>
<td>365</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>365</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>365</td>
<td>120</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>In this example, person 1 has no time-at-risk excluded, and zero
cases. Person 2 has all time-at-risk excluded (from a clean window) with
a case pre-exclude (pe), but no cases after time-at-risk was excluded.
Person 3 has part of their time-at-risk excluded, with 1 actual case (1
case was during a clean window).</p>
<p>Persons at risk = 2 (person 2 contributed zero time-at-risk, so is
not included in this count)</p>
<p>Total time-at-risk = 485d (sum of time_at_risk)</p>
<p>Persons with cases = 1</p>
<p>cases = 1</p>
<p>Calculations:</p>
<p>incidence proportion (persons per 100 persons): (persons with cases /
persons at risk) * 100.0 1/2 * 100.0 = 50%</p>
<p>incidence rate (cases per 100 person years): (cases / (time at risk /
365.25)) * 100.0 1/(485/365.25) * 100.0 = 75.3 cases per 100 person
years.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Christopher Knoll.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
